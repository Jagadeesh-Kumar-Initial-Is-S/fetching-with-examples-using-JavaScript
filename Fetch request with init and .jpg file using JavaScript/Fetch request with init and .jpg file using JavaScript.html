<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch request with init and .jpg file using JavaScript</title>
</head>
<body>
    <div class="navbar">
        <a href="../index.html">
            <h1>Home page</h1>
        </a>
        <a
            href="../basic fetch with .jpg file using JavaScript/Basic fetch with .jpg file using JavaScript.html">
            <h1>Previous</h1>
        </a>
        <a
            href="../fetch .json file using JavaScript/fetch .json file using JavaScript.html">
            <h1>Next</h1>
        </a>
    <div class="container">
        <h1>Fetch request with init and .jpg file using JavaScript</h1>
        <imp src="" />
    </div>
    <div class="navbar">
        <a href="../index.html">
            <h1>Home page</h1>
        </a>
        <a
            href="../basic fetch with .jpg file using JavaScript/Basic fetch with .jpg file using JavaScript.html">
            <h1>Previous</h1>
        </a>
        <a
            href="../fetch .json file using JavaScript/fetch .json file using JavaScript.html">
            <h1>Next</h1>
        </a>
    </body>
    <script>
        const myImage = document.querySelector("img");

        const myHeaders = new Headers();

        const myOptions = {
            method: "GET",
            headers: myHeaders,
            mode: "cors",
            cache: "default",
        };

        const myRequest = new Request("flowers.jpg", myOptions);

        fetch(myRequest)
        .then((response) => {
            if (!response.ok) {
                throw new Error(`HTTP error, status = ${response.status}`);
            }
            return response.blob();
        })
        .then((blob) => {
            const objectURL = URL.createObjectURL(blob);
            myImage.src = objectURL;
        })
        .catch((error) => {
            const p = document.createElement("p");
            p.appendChild(document.createTextNode(`Error: ${error.message}`));
            document.body.insertBefore(p, myImage);
        });
    </script>
</html>